# Каталог товаров

## Запуск

### Сервис

```
go run ./cmd/main.go [-config путь]
```

### Парсер

```
go run ./parser/parser.go
```

### Покрытие тестами

```
make cover
```

## Генерация

### Документация

```
swag init --parseDependency -g cmd/main.go
```

## Регистрация и авторизация

Регистрация и авторизация реализованы при помощи дополнительной таблицы `user` и  JWT-токенов (access и refresh).
При регистрации данные пользователя (username и password) сохраняются, при этом пароль хешируется алгоритмом `bcrypt`.

## Документация

Для просмотров всех запросов необходимо перейти на страницу со swagger документацией: `http://localhost:8081/api/v1/swagger`.

## Парсер

Было решено выделить парсер как самостоятельную единицу. Чтобы не нарушать безопасность сервиса, добавление собранных товаров происходит посредством отправки запроса на сервис с авторизационными данными.
Раз в N минут парсер собирает данные из указанного источника и одновременно отправляет их в in memory cache и в сервис. Если товар уже был в кэше, в сервис запрос не отправляется.
Кеш был добавлен как инструмент для предотвращения большого количества запросов.

## Затраченное время

Итого ~15 часов:
- бизнес логика (юзкейсы + сервисы) - 2 часа;
- база данных (докер, миграции) - 10 минут;
- реализация бизнес логики - 5 часов;
- авторизация (+ jwt) -  2 часа;
- тесты - 3 часа;
- документация - 1 час;
- парсер - 1 час;
